
<!--<meta http-equiv="refresh" content="1" />-->
<head>
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
        var app = {
            "name": "TCP Graphs",
            "progress": 80
        };
    </script>
</head>
    <style type="text/css">


        html, body { position: relative; font-family: monospace; width: 100%; height: 100%;   }
        .content { position: relative; font-family: monospace; width: 100%; height: 100%;   }

        .hbox {
            display: box; display: -webkit-box; display: -moz-box; position: relative;   
            box-orient: horizontal; -webkit-box-orient: horizontal; -moz-box-orient: horizontal;
            box-align: stretch; -webkit-box-align: stretch; -moz-box-align: stretch;
        }

        .vbox {
            display: box; display: -webkit-box; display: -moz-box;
            position: relative;  
            box-orient: vertical; -webkit-box-orient: vertical; -moz-box-orient: vertical;
            box-align: stretch; -webkit-box-align: stretch; -moz-box-align: stretch;
        }

        .f0 {
            display: box; display: -webkit-box; display: -moz-box;
            position: relative;
            box-flex: 0.0; -webkit-box-flex: 0.0; -moz-box-flex: 0.0;
        }

        .f1 {
            display: box; display: -webkit-box; display: -moz-box;
            position: relative;
            box-flex: 1.0; -webkit-box-flex: 1.0; -moz-box-flex: 1.0;
        }


    </style>

<body>

    <div class="hbox f1">
        <div class="vbox f1">
            <div class="hbox f0">
                <textarea type="text" id="input" style="font-family: monospace; width:500px; height:200px;" onkeyup="refresh();">
                </textarea>
            </div>
            <div class="hbox f1">
                <b>Settings</b>
                <ul id="fields" style="width: 400px; heaght: 100px; list-style: outside none;">
                    <li>TEST</li>
                </ul>
            </div>
        </div>
        <div class="vbox f1">
            <div id="cwnd_graph" style="width: 800; height: 300px;"></div>
            <div id="rtt_graph" style="width: 800; height: 300px;"></div>
            <div id="bytes_graph" style="width: 800; height: 300px;"></div>
            <div id="segments_graph" style="width: 800; height: 300px;"></div>
        </div>
    </div>
    <!--<div id="summary" style="width: 400; height: 100px;"></div>-->
</body>

<script>


function make_tag(tagname, text) {
    return "<" + tagname + ">" + text + "</" + tagname + ">";
}

function pre(text) {
    return make_tag(pre, text)
}

function print(name, obj) {
    document.getElementById('summary').innerHTML = "<br><strong>" + name + "<pre>" + JSON.stringify(obj, null, 2) + "</pre>";
}

function parse_csv(stringrep) {
    lines = stringrep.split("\n")
    headers = lines[0].split(',')
    console.log("headers=" + headers + " headers.length=" + headers.length)

    lists = {};


    for (var i = 0; i != headers.length; ++i) {
        headers[i] = headers[i].trim()
        lists[headers[i]] = []
    }

    for (var li = 1; li != lines.length; ++li) {
        var fields = lines[li].split(',');
        if (fields.length != headers.length) {
            break
        }
        //console.log("fields=" + fields + " fields.length=" + fields.length)
        for (var fi = 0; fi != headers.length; ++fi) {
            lists[headers[fi]].push(fields[fi])
        }
    }

    return lists
}

//document.getElementById('input').value = "speed,rtt,cwnd\n111,11,1\n222,22,2\n333,33,3"


document.getElementById('input').value = `# Flow, Port, Time[ns], Duration[ns], cwnd.Current[bytes], cwnd.Maximum[bytes], cwnd.min[bytes], rwnd.Current[bytes], rwnd.Maximum[bytes], rwnd.min[bytes],  rtt.Current[ns],  rtt.Maximum[ns], rtt.min[ns], ssthresh.cur, ssthresh.max, ssthresh.min, bytes.headers.rx, bytes.rx.payload , bytes.rx.total , segments.rx , of.Out segments, bytes.headers.tx, bytes.tx.payload , bytes.tx.total , segments.tx , Slow retransmissions, Fast retransmissions, Total retransmissions
tcp_bb_cubic,bbport-cubic,1492682088000000000,1000000000,115113,115113,71590,251136,251136,251136,17721896,116539218,10872520,65535,65535,65535,9340,0,9340,467,0,39120,2855760,2894880,1956,0,0,0
tcp_bb_cubic,bbport-cubic,1492682089000000000,1000000000,147985,147985,115150,385536,385536,251136,18251687,125150904,13892983,65535,65535,65535,9420,0,9420,471,0,41320,3016360,3057680,2066,0,0,0
tcp_bb_cubic,bbport-cubic,1492682090000000000,1000000000,175130,175130,148013,385536,385536,385536,18353143,151257793,15483491,65535,65535,65535,9400,0,9400,470,0,41840,3054320,3096160,2092,0,0,0
tcp_bb_cubic,bbport-cubic,1492682091000000000,1000000000,200143,200143,175154,385536,385536,385536,111559173,130413929,17382248,65535,65535,65535,9680,0,9680,484,0,44820,3271860,3316680,2241,0,0,0
tcp_bb_cubic,bbport-cubic,1492682092000000000,1000000000,222826,222826,200164,385536,385536,385536,32562154,139945465,22203466,65535,65535,65535,10540,0,10540,527,0,45800,3343400,3389200,2290,0,0,0
tcp_bb_cubic,bbport-cubic,1492682093000000000,1000000000,243365,243365,222845,385536,385536,385536,35028498,141880290,25289162,65535,65535,65535,9960,0,9960,498,0,45740,3339020,3384760,2287,0,0,0
tcp_bb_cubic,bbport-cubic,1492682094000000000,1000000000,263226,263226,243382,385536,385536,385536,39313464,151249655,29999948,65535,65535,65535,10940,0,10940,547,0,48080,3509840,3557920,2404,0,0,0
tcp_bb_cubic,bbport-cubic,1492682095000000000,1000000000,281426,281426,263306,385536,385536,385536,43230070,145685523,32930975,65535,65535,65535,10780,0,10780,539,0,47400,3460200,3507600,2370,0,0,0
tcp_bb_cubic,bbport-cubic,1492682096000000000,1000000000,298454,298454,281441,385536,385536,385536,47546871,150539705,32490537,65535,65535,65535,9980,0,9980,499,0,47240,3448520,3495760,2362,0,0,0
tcp_bb_cubic,bbport-cubic,1492682097000000000,1000000000,315009,315009,298532,385536,385536,385536,47657846,149236190,33994456,65535,65535,65535,9720,0,9720,486,0,48340,3528820,3577160,2417,0,0,0
tcp_bb_cubic,bbport-cubic,1492682098000000000,1000000000,330973,330973,315022,385536,385536,385536,141871585,154619850,31505590,65535,65535,65535,9820,0,9820,491,0,49460,3610580,3660040,2473,0,0,0
tcp_bb_cubic,bbport-cubic,1492682099000000000,1000000000,306615,541368,269808,1267328,1267328,259712,154322691,190785565,40221579,269808,269808,65535,25412,0,25412,879,0,35520,2592960,2628480,1776,0,20,20
tcp_bb_cubic,bbport-cubic,1492682100000000000,1000000000,328629,328629,306616,1267328,1267328,1267328,64583932,163823939,49384311,269808,269808,269808,17120,0,17120,856,0,38300,2795900,2834200,1915,0,0,0
tcp_bb_cubic,bbport-cubic,1492682101000000000,1000000000,336171,336171,328630,1267328,1267328,1267328,66767800,163705310,62563975,269808,269808,269808,18420,0,18420,921,0,37320,2724360,2761680,1866,0,0,0
tcp_bb_cubic,bbport-cubic,1492682102000000000,1000000000,337840,337840,336172,1267328,1267328,1267328,163144069,187015105,62955889,269808,269808,269808,18940,0,18940,947,0,38340,2798820,2837160,1917,0,0,0
tcp_bb_cubic,bbport-cubic,1492682103000000000,1000000000,344590,344590,337841,1267328,1267328,1267328,161218377,162882084,61078194,269808,269808,269808,16840,0,16840,842,0,36580,2670340,2706920,1829,0,0,0
tcp_bb_cubic,bbport-cubic,1492682104000000000,1000000000,369481,369481,344591,1267328,1267328,1267328,70571105,199150485,63561579,269808,269808,269808,19900,0,19900,995,0,40960,2990080,3031040,2048,0,0,0
tcp_bb_cubic,bbport-cubic,1492682105000000000,1000000000,429272,429272,369482,1267328,1267328,1267328,179469991,183110008,70711624,269808,269808,269808,17280,0,17280,864,0,35640,2601720,2637360,1782,0,0,0
tcp_bb_cubic,bbport-cubic,1492682106000000000,1000000000,534366,534366,429273,1267328,1267328,1267328,196310024,198657389,87136973,269808,269808,269808,17000,0,17000,850,0,35900,2620700,2656600,1795,0,0,0
tcp_bb_cubic,bbport-cubic,1492682108000000000,1000000000,956300,956300,716878,1267328,1267328,1267328,327705795,348362456,227725482,269808,269808,269808,17680,0,17680,884,0,40100,2927300,2967400,2005,0,0,0
tcp_bb_cubic,bbport-cubic,1492682109000000000,1000000000,1290640,1290640,957760,1267328,1267328,1267328,443111480,443111480,213999309,269808,269808,269808,15860,0,15860,793,0,43300,3160900,3204200,2165,0,0,0
tcp_bb_cubic,bbport-cubic,1492682110000000000,1000000000,1718580,1718580,1325680,1267328,1267328,1267328,433935794,565229356,426587758,269808,269808,269808,19520,0,19520,976,0,39420,2877660,2917080,1971,0,0,0
tcp_bb_cubic,bbport-cubic,1492682111000000000,1000000000,2261703,2261703,1762220,1267328,1267328,1267328,430281181,540115590,429985338,269808,269808,269808,18880,0,18880,944,0,38280,2794440,2832720,1914,0,0,0
tcp_bb_cubic,bbport-cubic,1492682112000000000,1000000000,2870413,2870413,2315560,1267328,1267328,1267328,209019625,532802046,195681186,269808,269808,269808,11280,0,11280,564,0,37300,2722900,2760200,1865,0,0,0
tcp_bb_cubic,bbport-cubic,1492682115000000000,1000000000,1035143,5442992,1027840,1267328,1267328,1267328,99275127,526360482,76440028,1013824,1013824,269808,13740,0,13740,687,0,59220,4323060,4382280,2961,868,0,868
tcp_bb_cubic,bbport-cubic,1492682116000000000,1000000000,770886,1071640,751900,1267328,1267328,1267328,99275127,99275127,99275127,740512,1013824,740512,9704,0,9704,445,0,40040,2922920,2962960,2002,1368,0,1368
tcp_bb_cubic,bbport-cubic,1492682117000000000,1000000000,576702,813240,569400,1267328,1267328,1267328,99275127,99275127,99275127,560640,740512,560640,36328,0,36328,1205,0,30340,2214820,2245160,1517,1037,0,1037
tcp_bb_cubic,bbport-cubic,1492682118000000000,1000000000,548983,605907,493480,1267328,1267328,1267328,106106473,218188445,81494227,484720,560640,484720,30560,0,30560,1165,0,31820,2322860,2354680,1591,415,0,415
tcp_bb_cubic,bbport-cubic,1492682119000000000,1000000000,589857,589857,548984,1267328,1267328,1267328,211172422,278159179,116824140,484720,484720,484720,19120,0,19120,956,0,39180,2860140,2899320,1959,0,0,0
tcp_bb_cubic,bbport-cubic,1492682120000000000,1000000000,603176,603176,591300,1267328,1267328,1267328,206983527,291502800,205857045,484720,484720,484720,19140,0,19140,957,0,39060,2851380,2890440,1953,0,0,0
tcp_bb_cubic,bbport-cubic,1492682121000000000,1000000000,606006,606006,604440,1267328,1267328,1267328,211772797,300408959,96525537,484720,484720,484720,17640,0,17640,882,0,40160,2931680,2971840,2008,0,0,0
tcp_bb_cubic,bbport-cubic,1492682122000000000,1000000000,607498,607498,606007,1267328,1267328,1267328,213260497,300626749,208168000,484720,484720,484720,18220,0,18220,911,0,36800,2686400,2723200,1840,0,0,0
tcp_bb_cubic,bbport-cubic,1492682123000000000,1000000000,624968,624968,607499,1267328,1267328,1267328,215283108,309704140,207886596,484720,484720,484720,18160,0,18160,908,0,36940,2696620,2733560,1847,0,0,0
tcp_bb_cubic,bbport-cubic,1492682124000000000,1000000000,670170,670170,624969,1267328,1267328,1267328,239879112,322835794,211242798,484720,484720,484720,17940,0,17940,897,0,36740,2682020,2718760,1837,0,0,0
tcp_bb_cubic,bbport-cubic,1492682125000000000,1000000000,756284,756284,670171,1267328,1267328,1267328,341303238,342219406,222545004,484720,484720,484720,17020,0,17020,851,0,36600,2671800,2708400,1830,0,0,0
tcp_bb_cubic,bbport-cubic,1492682126000000000,1000000000,873176,873176,756285,1267328,1267328,1267328,264473359,357941293,246674555,484720,484720,484720,17040,0,17040,852,0,37060,2705380,2742440,1853,0,0,0
tcp_bb_cubic,bbport-cubic,1492682131000000000,1000000000,2870433,2870433,2264553,1267328,1267328,1267328,439356559,601156014,224019826,484720,484720,484720,15840,0,15840,792,0,32360,2362280,2394640,1618,0,0,0
tcp_bb_cubic,bbport-cubic,1492682132000000000,1000000000,3629577,3629577,2870434,1267328,1267328,1267328,456623022,554257125,439098095,484720,484720,484720,17320,0,17320,866,0,34980,2553540,2588520,1749,0,0,0
tcp_bb_cubic,bbport-cubic,1492682133000000000,1000000000,4501182,4501182,3629578,1267328,1267328,1267328,541146868,545235559,443602100,484720,484720,484720,17500,0,17500,875,0,35140,2565220,2600360,1757,0,0,0
tcp_bb_cubic,bbport-cubic,1492682134000000000,1000000000,5313086,5313086,4501183,1267328,1267328,1267328,437911889,603515988,216377725,484720,484720,484720,15580,0,15580,779,0,40660,2968180,3008840,2033,0,0,0
tcp_bb_cubic,bbport-cubic,1492682135000000000,1000000000,6517566,6517566,5412220,1267328,1267328,1267328,440321011,541907103,438306847,484720,484720,484720,18540,0,18540,927,0,37280,2721440,2758720,1864,0,0,0
tcp_bb_cubic,bbport-cubic,1492682138000000000,1000000000,11173542,11173542,9573220,1267328,1267328,1267328,428616160,543408279,420882695,484720,484720,484720,18540,0,18540,927,0,39260,2865980,2905240,1963,0,0,0
tcp_bb_cubic,bbport-cubic,1492682139000000000,1000000000,13204333,13204333,11173543,1267328,1267328,1267328,438283364,538126586,426794332,484720,484720,484720,17980,0,17980,899,0,36300,2649900,2686200,1815,0,0,0
tcp_bb_cubic,bbport-cubic,1492682140000000000,1000000000,15369496,15369496,13204334,1267328,1267328,1267328,427188238,590568725,218833746,484720,484720,484720,15720,0,15720,786,0,41340,3017820,3059160,2067,0,0,0
tcp_bb_cubic,bbport-cubic,1492682141000000000,1000000000,17918596,17918596,15369497,1267328,1267328,1267328,447133783,534178416,425696566,484720,484720,484720,18360,0,18360,918,0,37040,2703920,2740960,1852,0,0,0
tcp_bb_cubic,bbport-cubic,1492682142000000000,1000000000,20581620,20581620,17918597,1267328,1267328,1267328,522381128,536910216,431182017,484720,484720,484720,18660,0,18660,933,0,37500,2737500,2775000,1875,0,0,0
tcp_bb_cubic,bbport-cubic,1492682145000000000,1000000000,29814802,29814802,26551560,1267328,1267328,1267328,435223056,530004130,429200205,484720,484720,484720,19220,0,19220,961,0,38760,2829480,2868240,1938,0,0,0
tcp_bb_cubic,bbport-cubic,1492682146000000000,1000000000,34127572,34127572,30131480,1267328,1267328,1267328,455344307,608415369,223299785,484720,484720,484720,16220,0,16220,811,0,41380,3020740,3062120,2069,0,0,0
tcp_bb_cubic,bbport-cubic,1492682147000000000,1000000000,37897341,37897341,34127573,1267328,1267328,1267328,429716107,552119939,429716107,484720,484720,484720,18640,0,18640,932,0,37660,2749180,2786840,1883,0,0,0
tcp_bb_cubic,bbport-cubic,1492682148000000000,1000000000,42380972,42380972,37897342,1267328,1267328,1267328,434207652,532225939,428775538,484720,484720,484720,18540,0,18540,927,0,37240,2718520,2755760,1862,0,0,0
tcp_bb_cubic,bbport-cubic,1492682149000000000,1000000000,47603309,47603309,42380973,1267328,1267328,1267328,574281342,584686626,225647563,484720,484720,484720,16240,0,16240,812,0,41020,2994460,3035480,2051,0,0,0
tcp_bb_cubic,bbport-cubic,1492682151000000000,1000000000,56938665,56938665,52462183,1267328,1267328,1267328,422627707,534995869,422627707,484720,484720,484720,17500,0,17500,875,0,37400,2730200,2767600,1870,0,0,0
tcp_bb_cubic,bbport-cubic,1492682152000000000,1000000000,63051560,63051560,57359020,1267328,1267328,1267328,475399498,527784911,208839663,484720,484720,484720,16420,0,16420,821,0,42720,3118560,3161280,2136,0,0,0
tcp_bb_cubic,bbport-cubic,1492682153000000000,1000000000,69869814,69869814,64123200,1267328,1267328,1267328,432293633,685775975,432222247,484720,484720,484720,17840,0,17840,892,0,36140,2638220,2674360,1807,0,0,0
tcp_bb_cubic,bbport-cubic,1492682154000000000,1000000000,76638328,76638328,69869815,1267328,1267328,1267328,464427610,528865055,421090881,484720,484720,484720,18300,0,18300,915,0,38100,2781300,2819400,1905,0,0,0
tcp_bb_cubic,bbport-cubic,1492682155000000000,1000000000,83536820,83536820,76638329,1267328,1267328,1267328,505758461,529093896,423593406,484720,484720,484720,18720,0,18720,936,0,38180,2787140,2825320,1909,0,0,0
tcp_bb_cubic,bbport-cubic,1492682157000000000,1000000000,97957388,97957388,90628040,1267328,1267328,1267328,434728163,533500380,428349337,484720,484720,484720,19280,0,19280,964,0,39020,2848460,2887480,1951,0,0,0
tcp_bb_cubic,bbport-cubic,1492682158000000000,1000000000,106182880,106182880,98656580,1267328,1267328,1267328,414166446,541786856,238277201,484720,484720,484720,16460,0,16460,823,0,41260,3011980,3053240,2063,0,0,0
tcp_bb_cubic,bbport-cubic,1492682159000000000,1000000000,1165085,109009440,1013824,1573888,1573888,341888,452831813,574790131,78771917,1013824,1013824,484720,43504,0,43504,1309,0,31240,2280520,2311760,1562,0,2,2
tcp_bb_cubic,bbport-cubic,1492682160000000000,1000000000,1227995,1227995,1172380,1573888,1573888,1573888,442009699,616072494,413444800,1013824,1013824,1013824,17820,0,17820,891,0,36440,2660120,2696560,1822,0,0,0
tcp_bb_cubic,bbport-cubic,1492682161000000000,1000000000,1255692,1255692,1227996,1573888,1573888,1573888,405084502,544775270,225181366,1013824,1013824,1013824,15100,0,15100,755,0,38860,2836780,2875640,1943,0,0,0
tcp_bb_cubic,bbport-cubic,1492682167000000000,1000000000,1424973,1424973,1344660,1573888,1573888,1573888,388477962,556103017,237121291,1013824,1013824,1013824,16620,0,16620,831,0,43380,3166740,3210120,2169,0,0,0
tcp_bb_cubic,bbport-cubic,1492682168000000000,1000000000,1601787,1601787,1433720,1573888,1573888,1573888,540795470,758731582,390967154,1013824,1013824,1013824,17140,0,17140,857,0,36240,2645520,2681760,1812,0,0,0
tcp_bb_cubic,bbport-cubic,1492682169000000000,1000000000,1817700,1817700,1601788,1573888,1573888,1573888,585827780,606790403,491647300,1013824,1013824,1013824,18700,0,18700,935,0,37340,2725820,2763160,1867,0,0,0
tcp_bb_cubic,bbport-cubic,1492682170000000000,1000000000,2045461,2045461,1817701,1573888,1573888,1573888,375919641,591805851,226701903,1013824,1013824,1013824,16420,0,16420,821,0,45320,3308360,3353680,2266,0,0,0
tcp_bb_cubic,bbport-cubic,1492682171000000000,1000000000,2511204,2511204,2045462,1573888,1573888,1573888,603465995,776707694,320930895,1013824,1013824,1013824,16900,0,16900,845,0,33720,2461560,2495280,1686,0,0,0
tcp_bb_cubic,bbport-cubic,1492682174000000000,1000000000,4289511,4289511,3508411,1573888,1573888,1573888,503177000,781308057,254284259,1013824,1013824,1013824,17240,0,17240,862,0,34440,2514120,2548560,1722,0,0,0
tcp_bb_cubic,bbport-cubic,1492682175000000000,1000000000,1445984,5146502,1263484,1573888,1573888,1573888,616302338,689001179,504471316,1259104,1259104,1013824,26732,0,26732,1132,0,31760,2318480,2350240,1588,0,10,10
tcp_bb_cubic,bbport-cubic,1492682176000000000,1000000000,1477525,2520544,1259104,1573888,1573888,1075072,655732783,655732783,52434294,1259104,1259104,1259104,31792,0,31792,1148,0,36340,2652820,2689160,1817,0,0,0
tcp_bb_cubic,bbport-cubic,1492682177000000000,1000000000,1533057,1533057,1484820,1573888,1573888,1573888,480474825,737338107,446320555,1259104,1259104,1259104,17220,0,17220,861,0,40480,2955040,2995520,2024,0,0,0
tcp_bb_cubic,bbport-cubic,1492682178000000000,1000000000,1563734,1563734,1533058,1573888,1573888,1573888,591807218,592635704,479569024,1259104,1259104,1259104,18260,0,18260,913,0,36880,2692240,2729120,1844,0,0,0
tcp_bb_cubic,bbport-cubic,1492682185000000000,1000000000,1876100,1876100,1750575,1573888,1573888,1573888,549524342,624402285,497890255,1259104,1259104,1259104,18200,0,18200,910,0,36280,2648440,2684720,1814,0,0,0
tcp_bb_cubic,bbport-cubic,1492682186000000000,1000000000,2093640,2093640,1877560,1573888,1573888,1573888,663708156,663708156,217120318,1259104,1259104,1259104,15540,0,15540,777,0,43820,3198860,3242680,2191,0,0,0
tcp_bb_cubic,bbport-cubic,1492682187000000000,1000000000,2356496,2356496,2117000,1573888,1573888,1573888,496867043,789128876,496867043,1259104,1259104,1259104,19220,0,19220,961,0,38380,2801740,2840120,1919,0,0,0
tcp_bb_cubic,bbport-cubic,1492682188000000000,1000000000,2736082,2736082,2365200,1573888,1573888,1573888,493702976,592782516,488020000,1259104,1259104,1259104,19540,0,19540,977,0,39020,2848460,2887480,1951,0,0,0
tcp_bb_cubic,bbport-cubic,1492682189000000000,1000000000,3276241,3276241,2746260,1573888,1573888,1573888,665820858,665820858,179885337,1259104,1259104,1259104,15360,0,15360,768,0,46060,3362380,3408440,2303,0,0,0
tcp_bb_cubic,bbport-cubic,1492682195000000000,1000000000,8673860,8673860,7502940,1573888,1573888,1573888,462752368,605649731,227613251,1259104,1259104,1259104,14860,0,14860,743,0,42300,3087900,3130200,2115,0,0,0
tcp_bb_cubic,bbport-cubic,1492682196000000000,1000000000,10424419,10424419,8812560,1573888,1573888,1573888,514384098,795413327,475170815,1259104,1259104,1259104,18860,0,18860,943,0,37720,2753560,2791280,1886,0,0,0
tcp_bb_cubic,bbport-cubic,1492682197000000000,1000000000,12209988,12209988,10455060,1573888,1573888,1573888,539050584,608209136,507056156,1259104,1259104,1259104,18520,0,18520,926,0,37000,2701000,2738000,1850,0,0,0
tcp_bb_cubic,bbport-cubic,1492682198000000000,1000000000,13911005,13911005,12280060,1573888,1573888,1573888,440466374,608661233,246137329,1259104,1259104,1259104,15240,0,15240,762,0,42300,3087900,3130200,2115,0,0,0
tcp_bb_cubic,bbport-cubic,1492682199000000000,1000000000,16335940,16335940,13911006,1573888,1573888,1573888,585643163,770266202,441105869,1259104,1259104,1259104,18780,0,18780,939,0,37680,2750640,2788320,1884,0,0,0
tcp_bb_cubic,bbport-cubic,1492682203000000000,1000000000,27261152,27261152,24266660,1573888,1573888,1573888,499950813,599905198,498725008,1259104,1259104,1259104,18940,0,18940,947,0,37900,2766700,2804600,1895,0,0,0
tcp_bb_cubic,bbport-cubic,1492682204000000000,1000000000,29857102,29857102,27320980,1573888,1573888,1573888,288337117,595763136,178587014,1259104,1259104,1259104,15460,0,15460,773,0,46500,3394500,3441000,2325,0,0,0
tcp_bb_cubic,bbport-cubic,1492682205000000000,1000000000,35034160,35034160,30124180,1573888,1573888,1573888,644445022,807562841,301166074,1259104,1259104,1259104,17960,0,17960,898,0,35860,2617780,2653640,1793,0,0,0
tcp_bb_cubic,bbport-cubic,1492682206000000000,1000000000,38909000,38909000,35038540,1573888,1573888,1573888,591132343,646689674,496375270,1259104,1259104,1259104,18080,0,18080,904,0,36160,2639680,2675840,1808,0,0,0
tcp_bb_cubic,bbport-cubic,1492682207000000000,1000000000,42532803,42532803,38920680,1573888,1573888,1573888,270634122,602178521,252839239,1259104,1259104,1259104,16860,0,16860,843,0,45400,3314200,3359600,2270,0,0,0,  9523208,   1938289,  48101
`;


function refresh() {
    lists = parse_csv(document.getElementById('input').value)
    //print("After parsing:", lists)

    var ul = document.getElementById("fields");
    ul.innerHTML = ""
    for (var field in lists) {
        ul.innerHTML += '<li><input type="checkbox" id="' + field + '" onclick="refresh_graph()" >&nbsp' + field + '</input></li>';
    }

    refresh_graph()
}

function refresh_graph() {
    Plotly.newPlot('cwnd_graph', get_graphs("cwnd", lists));
    Plotly.newPlot('bytes_graph', get_graphs("bytes.headers", lists));
    Plotly.newPlot('segments_graph', get_graphs("segments", lists));
    Plotly.newPlot('rtt_graph', get_graphs("rtt", lists));
}


function get_graphs(prefix, lists) {
    var result = [];
    for (var field in lists) {

        if (!field.startsWith(prefix) && field != "time") {
            continue;
        }
        
        if (!document.getElementById(field).bb) {
            document.getElementById(field).checked = true;
            document.getElementById(field).bb = true
        }

        if (!document.getElementById(field).checked) {
            continue;
        }
        var item = {
            name: field,
            type: 'scatter'
        };
        if (field != "time") {
            item.x = lists["time"];
            item.y = lists[field];
        }
        result.push(item);
    }
    console.log("result: " + JSON.stringify(result, null, 2));
    return result;
}
refresh();


</script>
